import{a as xe,b as K,c as D,d as N,e as J,f as Te,g as Ie,h as Ae,i as Z,j as Oe,k as ke,l as Re,m as Fe}from"./chunk-A5XPUSZM.js";import{B as ye,C as Ce,D as Pe,E as Ee,a as se,b as le,c as $,d as he,e as ce,f as de,g as z,h as W,i as Y,j as ue,k as fe,l as ge,m as me,n as ve,o as q,p as pe,q as we,r as Me,x as be}from"./chunk-DGULZJMR.js";import"./chunk-NHXDGK5N.js";import"./chunk-KLDHDQ7H.js";import"./chunk-7XFXJMDA.js";import"./chunk-XUH3WQQT.js";import"./chunk-LV4HBK2W.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-FNBMHXHF.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var ee={};(function F(y,H,r,o){var h=!!(y.Worker&&y.Blob&&y.Promise&&y.OffscreenCanvas&&y.OffscreenCanvasRenderingContext2D&&y.HTMLCanvasElement&&y.HTMLCanvasElement.prototype.transferControlToOffscreen&&y.URL&&y.URL.createObjectURL),m=typeof Path2D=="function"&&typeof DOMMatrix=="function",f=(function(){if(!y.OffscreenCanvas)return!1;var t=new OffscreenCanvas(1,1),e=t.getContext("2d");e.fillRect(0,0,1,1);var n=t.transferToImageBitmap();try{e.createPattern(n,"no-repeat")}catch{return!1}return!0})();function g(){}function E(t){var e=H.exports.Promise,n=e!==void 0?e:y.Promise;return typeof n=="function"?new n(t):(t(g,g),null)}var x=(function(t,e){return{transform:function(n){if(t)return n;if(e.has(n))return e.get(n);var a=new OffscreenCanvas(n.width,n.height),s=a.getContext("2d");return s.drawImage(n,0,0),e.set(n,a),a},clear:function(){e.clear()}}})(f,new Map),R=(function(){var t=Math.floor(16.666666666666668),e,n,a={},s=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(l){var c=Math.random();return a[c]=requestAnimationFrame(function i(d){s===d||s+t-1<d?(s=d,delete a[c],l()):a[c]=requestAnimationFrame(i)}),c},n=function(l){a[l]&&cancelAnimationFrame(a[l])}):(e=function(l){return setTimeout(l,t)},n=function(l){return clearTimeout(l)}),{frame:e,cancel:n}})(),L=(function(){var t,e,n={};function a(s){function l(c,i){s.postMessage({options:c||{},callback:i})}s.init=function(i){var d=i.transferControlToOffscreen();s.postMessage({canvas:d},[d])},s.fire=function(i,d,v){if(e)return l(i,null),e;var M=Math.random().toString(36).slice(2);return e=E(function(p){function b(C){C.data.callback===M&&(delete n[M],s.removeEventListener("message",b),e=null,x.clear(),v(),p())}s.addEventListener("message",b),l(i,M),n[M]=b.bind(null,{data:{callback:M}})}),e},s.reset=function(){s.postMessage({reset:!0});for(var i in n)n[i](),delete n[i]}}return function(){if(t)return t;if(!r&&h){var s=["var CONFETTI, SIZE = {}, module = {};","("+F.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{t=new Worker(URL.createObjectURL(new Blob([s])))}catch(l){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("\u{1F38A} Could not load worker",l),null}a(t)}return t}})(),B={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function O(t,e){return e?e(t):t}function j(t){return t!=null}function w(t,e,n){return O(t&&j(t[e])?t[e]:B[e],n)}function G(t){return t<0?0:Math.floor(t)}function U(t,e){return Math.floor(Math.random()*(e-t))+t}function _(t){return parseInt(t,16)}function V(t){return t.map(He)}function He(t){var e=String(t).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:_(e.substring(0,2)),g:_(e.substring(2,4)),b:_(e.substring(4,6))}}function Be(t){var e=w(t,"origin",Object);return e.x=w(e,"x",Number),e.y=w(e,"y",Number),e}function _e(t){t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight}function De(t){var e=t.getBoundingClientRect();t.width=e.width,t.height=e.height}function Le(t){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=t,e}function je(t,e,n,a,s,l,c,i,d){t.save(),t.translate(e,n),t.rotate(l),t.scale(a,s),t.arc(0,0,1,c,i,d),t.restore()}function ze(t){var e=t.angle*(Math.PI/180),n=t.spread*(Math.PI/180);return{x:t.x,y:t.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:t.startVelocity*.5+Math.random()*t.startVelocity,angle2D:-e+(.5*n-Math.random()*n),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:t.color,shape:t.shape,tick:0,totalTicks:t.ticks,decay:t.decay,drift:t.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:t.gravity*3,ovalScalar:.6,scalar:t.scalar,flat:t.flat}}function We(t,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var n=e.tick++/e.totalTicks,a=e.x+e.random*e.tiltCos,s=e.y+e.random*e.tiltSin,l=e.wobbleX+e.random*e.tiltCos,c=e.wobbleY+e.random*e.tiltSin;if(t.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-n)+")",t.beginPath(),m&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))t.fill(Ge(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(l-a)*.1,Math.abs(c-s)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var i=Math.PI/10*e.wobble,d=Math.abs(l-a)*.1,v=Math.abs(c-s)*.1,M=e.shape.bitmap.width*e.scalar,p=e.shape.bitmap.height*e.scalar,b=new DOMMatrix([Math.cos(i)*d,Math.sin(i)*d,-Math.sin(i)*v,Math.cos(i)*v,e.x,e.y]);b.multiplySelf(new DOMMatrix(e.shape.matrix));var C=t.createPattern(x.transform(e.shape.bitmap),"no-repeat");C.setTransform(b),t.globalAlpha=1-n,t.fillStyle=C,t.fillRect(e.x-M/2,e.y-p/2,M,p),t.globalAlpha=1}else if(e.shape==="circle")t.ellipse?t.ellipse(e.x,e.y,Math.abs(l-a)*e.ovalScalar,Math.abs(c-s)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):je(t,e.x,e.y,Math.abs(l-a)*e.ovalScalar,Math.abs(c-s)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var u=Math.PI/2*3,P=4*e.scalar,T=8*e.scalar,I=e.x,k=e.y,S=5,A=Math.PI/S;S--;)I=e.x+Math.cos(u)*T,k=e.y+Math.sin(u)*T,t.lineTo(I,k),u+=A,I=e.x+Math.cos(u)*P,k=e.y+Math.sin(u)*P,t.lineTo(I,k),u+=A;else t.moveTo(Math.floor(e.x),Math.floor(e.y)),t.lineTo(Math.floor(e.wobbleX),Math.floor(s)),t.lineTo(Math.floor(l),Math.floor(c)),t.lineTo(Math.floor(a),Math.floor(e.wobbleY));return t.closePath(),t.fill(),e.tick<e.totalTicks}function Ne(t,e,n,a,s){var l=e.slice(),c=t.getContext("2d"),i,d,v=E(function(M){function p(){i=d=null,c.clearRect(0,0,a.width,a.height),x.clear(),s(),M()}function b(){r&&!(a.width===o.width&&a.height===o.height)&&(a.width=t.width=o.width,a.height=t.height=o.height),!a.width&&!a.height&&(n(t),a.width=t.width,a.height=t.height),c.clearRect(0,0,a.width,a.height),l=l.filter(function(C){return We(c,C)}),l.length?i=R.frame(b):p()}i=R.frame(b),d=p});return{addFettis:function(M){return l=l.concat(M),v},canvas:t,promise:v,reset:function(){i&&R.cancel(i),d&&d()}}}function te(t,e){var n=!t,a=!!w(e||{},"resize"),s=!1,l=w(e,"disableForReducedMotion",Boolean),c=h&&!!w(e||{},"useWorker"),i=c?L():null,d=n?_e:De,v=t&&i?!!t.__confetti_initialized:!1,M=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,p;function b(u,P,T){for(var I=w(u,"particleCount",G),k=w(u,"angle",Number),S=w(u,"spread",Number),A=w(u,"startVelocity",Number),qe=w(u,"decay",Number),Ke=w(u,"gravity",Number),Ze=w(u,"drift",Number),re=w(u,"colors",V),Qe=w(u,"ticks",Number),ie=w(u,"shapes"),Xe=w(u,"scalar"),$e=!!w(u,"flat"),ae=Be(u),oe=I,X=[],Ye=t.width*ae.x,Je=t.height*ae.y;oe--;)X.push(ze({x:Ye,y:Je,angle:k,spread:S,startVelocity:A,color:re[oe%re.length],shape:ie[U(0,ie.length)],ticks:Qe,decay:qe,gravity:Ke,drift:Ze,scalar:Xe,flat:$e}));return p?p.addFettis(X):(p=Ne(t,X,d,P,T),p.promise)}function C(u){var P=l||w(u,"disableForReducedMotion",Boolean),T=w(u,"zIndex",Number);if(P&&M)return E(function(A){A()});n&&p?t=p.canvas:n&&!t&&(t=Le(T),document.body.appendChild(t)),a&&!v&&d(t);var I={width:t.width,height:t.height};i&&!v&&i.init(t),v=!0,i&&(t.__confetti_initialized=!0);function k(){if(i){var A={getBoundingClientRect:function(){if(!n)return t.getBoundingClientRect()}};d(A),i.postMessage({resize:{width:A.width,height:A.height}});return}I.width=I.height=null}function S(){p=null,a&&(s=!1,y.removeEventListener("resize",k)),n&&t&&(document.body.contains(t)&&document.body.removeChild(t),t=null,v=!1)}return a&&!s&&(s=!0,y.addEventListener("resize",k,!1)),i?i.fire(u,I,S):b(u,I,S)}return C.reset=function(){i&&i.reset(),p&&p.reset()},C}var Q;function ne(){return Q||(Q=te(null,{useWorker:!0,resize:!0})),Q}function Ge(t,e,n,a,s,l,c){var i=new Path2D(t),d=new Path2D;d.addPath(i,new DOMMatrix(e));var v=new Path2D;return v.addPath(d,new DOMMatrix([Math.cos(c)*s,Math.sin(c)*s,-Math.sin(c)*l,Math.cos(c)*l,n,a])),v}function Ue(t){if(!m)throw new Error("path confetti are not supported in this browser");var e,n;typeof t=="string"?e=t:(e=t.path,n=t.matrix);var a=new Path2D(e),s=document.createElement("canvas"),l=s.getContext("2d");if(!n){for(var c=1e3,i=c,d=c,v=0,M=0,p,b,C=0;C<c;C+=2)for(var u=0;u<c;u+=2)l.isPointInPath(a,C,u,"nonzero")&&(i=Math.min(i,C),d=Math.min(d,u),v=Math.max(v,C),M=Math.max(M,u));p=v-i,b=M-d;var P=10,T=Math.min(P/p,P/b);n=[T,0,0,T,-Math.round(p/2+i)*T,-Math.round(b/2+d)*T]}return{type:"path",path:e,matrix:n}}function Ve(t){var e,n=1,a="#000000",s='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof t=="string"?e=t:(e=t.text,n="scalar"in t?t.scalar:n,s="fontFamily"in t?t.fontFamily:s,a="color"in t?t.color:a);var l=10*n,c=""+l+"px "+s,i=new OffscreenCanvas(l,l),d=i.getContext("2d");d.font=c;var v=d.measureText(e),M=Math.ceil(v.actualBoundingBoxRight+v.actualBoundingBoxLeft),p=Math.ceil(v.actualBoundingBoxAscent+v.actualBoundingBoxDescent),b=2,C=v.actualBoundingBoxLeft+b,u=v.actualBoundingBoxAscent+b;M+=b+b,p+=b+b,i=new OffscreenCanvas(M,p),d=i.getContext("2d"),d.font=c,d.fillStyle=a,d.fillText(e,C,u);var P=1/n;return{type:"bitmap",bitmap:i.transferToImageBitmap(),matrix:[P,0,0,P,-M*P/2,-p*P/2]}}H.exports=function(){return ne().apply(this,arguments)},H.exports.reset=function(){ne().reset()},H.exports.create=te,H.exports.shapeFromPath=Ue,H.exports.shapeFromText=Ve})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),ee,!1);var Se=ee.exports,nt=ee.exports.create;var et=["rendererContainer"];function tt(F,y){F&1&&(z(0,"div",7),q(1," \u{1F449} Glisse horizontalement pour d\xE9couvrir ton souhait ! ( droite -----> gauche ) "),W())}var dt=(()=>{let y=class y{constructor(){this.animationId=0,this.spine=new D,this.BOOK_WIDTH=2.4,this.BOOK_HEIGHT=1.6,this.PAGE_THICK=.02,this.emojis=["\u{1F389}","\u2728","\u{1F382}","\u{1F381}","\u{1F31F}","\u{1F496}","\u{1F3B6}"],this.backgroundAudio=new Audio("assets/happy-birthday.mp3"),this.isOpen=!1,this.showHint=!0,this.targetAngle=0,this.currentAngle=Math.PI/2,this.isPointerDown=!1,this.pointerStartX=0,this.startAngle=0,this.animate=()=>{this.animationId=requestAnimationFrame(this.animate);let r=this.targetAngle-this.currentAngle;this.currentAngle+=r*.15,Math.abs(r)<5e-4&&(this.currentAngle=this.targetAngle),this.applyAngle(this.currentAngle);let o=performance.now()*.002;this.spine.rotation.y=Math.sin(o)*.1,this.spine.rotation.x=Math.sin(o*.6)*.01,this.renderer.render(this.scene,this.camera)},this.onPointerDown=r=>{this.isPointerDown=!0,this.pointerStartX=r.clientX,this.startAngle=this.currentAngle},this.onPointerMove=r=>{if(!this.isPointerDown)return;let o=r.clientX-this.pointerStartX,h=this.rendererContainer.nativeElement.clientWidth||window.innerWidth,m=o/h*Math.PI,f=this.startAngle-m;this.setOpenAngle(f,!1)},this.onPointerUp=r=>{this.isPointerDown&&(this.isPointerDown=!1,this.currentAngle>Math.PI/4?(this.isOpen=!0,this.showHint=!1,this.setOpenAngle(Math.PI/2)):(this.isOpen=!1,this.setOpenAngle(0)))},this.onResize=()=>{let r=this.rendererContainer.nativeElement.clientWidth||window.innerWidth,o=this.rendererContainer.nativeElement.clientHeight||window.innerHeight;this.camera.aspect=r/o,this.camera.updateProjectionMatrix(),this.renderer.setSize(r,o)}}ngAfterViewInit(){this.initScene(),this.loadBookTexturesAndBuild(),this.animate(),window.addEventListener("resize",this.onResize),this.rendererContainer.nativeElement.addEventListener("pointerdown",this.onPointerDown),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp)}ngOnInit(){this.startFireworkss(),this.backgroundAudio.loop=!0,this.backgroundAudio.volume=.4}startFireworkss(){let r=document.getElementById("emoji-container");setInterval(()=>{for(let o=0;o<10;o++){let h=document.createElement("span");h.classList.add("emoji"),h.textContent=this.emojis[Math.floor(Math.random()*this.emojis.length)];let m=Math.random()*2*Math.PI,f=100+Math.random()*150,g=Math.cos(m)*f,E=Math.sin(m)*f;h.style.setProperty("--move",`translate(${g}px, ${E}px)`);let x=1.2+Math.random();h.style.animationDuration=`${x}s`,r?.appendChild(h),setTimeout(()=>h.remove(),x*1e3)}},2e3)}ngOnDestroy(){cancelAnimationFrame(this.animationId),window.removeEventListener("resize",this.onResize),this.rendererContainer.nativeElement.removeEventListener("pointerdown",this.onPointerDown),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this.renderer?.dispose(),this.stopFireworks()}initScene(){let r=this.rendererContainer.nativeElement.clientWidth||window.innerWidth,o=this.rendererContainer.nativeElement.clientHeight||window.innerHeight;this.scene=new Ie,this.camera=new Te(60,r/o,.1,100),this.camera.position.set(0,-.9,3.5),this.camera.lookAt(0,0,0),this.renderer=new Fe({antialias:!0,alpha:!0}),this.renderer.setSize(r,o),this.renderer.setPixelRatio(window.devicePixelRatio||1),this.rendererContainer.nativeElement.appendChild(this.renderer.domElement);let h=new Re(16777215,.6);this.scene.add(h);let m=new ke(16777215,.8);m.position.set(5,5,5),this.scene.add(m),this.spine.position.set(0,0,0),this.scene.add(this.spine)}loadBookTexturesAndBuild(){let r=new Oe,o={coverFront:"assets/image4.jpeg",coverBack:"assets/image3.jpeg",pageLeft:"assets/image2.jpeg",pageRight:"assets/image1.jpeg"};Promise.all([this.loadTextureSafe(r,o.coverFront),this.loadTextureSafe(r,o.coverBack),this.loadTextureSafe(r,o.pageLeft),this.loadTextureSafe(r,o.pageRight)]).then(([h,m,f,g])=>{this.buildBook(h,m,f,g)})}loadTextureSafe(r,o){return new Promise(h=>{r.load(o,m=>{m.anisotropy=4,h(m)},void 0,()=>h(null))})}buildBook(r,o,h,m){let f=this.BOOK_WIDTH/2,g=this.BOOK_HEIGHT,E=this.PAGE_THICK,x=`Bon anniversaire !
Que tous tes r\xEAves se r\xE9alisent \u{1F31F}`,R=`Avec amour,
#AllenFamily`,L=this.createMaterialFromImageAndText(h,x),B=this.createMaterialFromImageAndText(m,R),j=r?this.createMaterialFromImageAndText(r,"Carte de V\u0153ux"):new Z({color:9109504,side:K}),w=o?this.createMaterialFromImageAndText(o,`De la part de
 #AllenFamily`):new Z({color:3355443,side:K}),G=new D;this.rightCoverPivot=new D,this.rightCoverPivot.position.set(0,0,0),G.add(this.rightCoverPivot);let U=new J(f,g,E);this.rightCover=new N(U,j),this.rightCover.position.set(f/2,0,0),this.rightCoverPivot.add(this.rightCover);let _=new J(f-.02,g-.02,E/2);this.rightPage=new N(_,B),this.rightPage.position.set(f/2,0,E+.001),this.rightCoverPivot.add(this.rightPage);let V=new D;this.leftCoverPivot=new D,this.leftCoverPivot.position.set(0,0,0),V.add(this.leftCoverPivot),this.leftCover=new N(U,w),this.leftCover.position.set(-f/2,0,0),this.leftCoverPivot.add(this.leftCover),this.leftPage=new N(_,L),this.leftPage.position.set(-f/2,0,E+.001),this.leftCoverPivot.add(this.leftPage),this.spine.add(G),this.spine.add(V),this.setOpenAngle(2*Math.PI,!1)}setOpenAngle(r,o=!0){this.targetAngle=Math.max(0,Math.min(Math.PI/2,r)),o||(this.currentAngle=this.targetAngle,this.applyAngle(this.currentAngle),console.log(this.currentAngle),this.currentAngle!=Math.PI*0&&(this.startFireworks(),console.log("hdhdhdhdhdhdhdhdhdhdhdhdh"),this.backgroundAudio.currentTime=0,this.backgroundAudio.play().catch(h=>console.warn("Audio play failed",h))),this.currentAngle==Math.PI/2&&(this.stopFireworks(),console.log("Angle PI/2"),this.backgroundAudio.pause()))}applyAngle(r){!this.rightCoverPivot||!this.leftCoverPivot||(this.rightCoverPivot.rotation.y=-r,this.leftCoverPivot.rotation.y=r)}toggleOpen(){this.isOpen=!this.isOpen,this.showHint=!1,this.setOpenAngle(this.isOpen?Math.PI/2:0)}composeImageAndTextTexture(r,o,h=1024,m=512){let f=document.createElement("canvas");f.width=h,f.height=m;let g=f.getContext("2d");if(r&&(r.image instanceof HTMLImageElement||r.image instanceof ImageBitmap))try{g.drawImage(r.image,0,0,f.width,f.height)}catch{g.fillStyle="#fff8dc",g.fillRect(0,0,f.width,f.height)}else{let O=g.createLinearGradient(0,0,f.width,f.height);O.addColorStop(0,"#fff8dc"),O.addColorStop(1,"#ffe4c4"),g.fillStyle=O,g.fillRect(0,0,f.width,f.height)}g.strokeStyle="rgba(0,0,0,0.06)",g.lineWidth=12,g.strokeRect(10,10,f.width-20,f.height-20),g.fillStyle="#8B0000";let E=o.split(`
`),x=Math.floor(h/30);g.font=`bold ${x}px "Georgia", serif`,g.textAlign="center",g.textBaseline="middle",g.shadowColor="rgba(0,0,0,0.25)",g.shadowOffsetX=3,g.shadowOffsetY=3,g.shadowBlur=6;let R=x*1.2,L=m/2-(E.length-1)*R/2;E.forEach((O,j)=>{g.fillText(O,h/2,L+j*R)});let B=new Ae(f);return B.needsUpdate=!0,B}createMaterialFromImageAndText(r,o,h=!0){let m=this.composeImageAndTextTexture(r,o);return new Z({map:m,side:h?K:xe,roughness:.7,metalness:.05})}startFireworks(){this.stopFireworks(),this.fireworksInterval=setInterval(()=>{this.launchFireworks()},1e3)}stopFireworks(){this.fireworksInterval&&(clearInterval(this.fireworksInterval),this.fireworksInterval=null)}launchFireworks(){function r(o,h){Se(Object.assign({},h,{particleCount:Math.floor(150*o)}))}r(.25,{spread:26,startVelocity:55,angle:60,origin:{x:.2,y:.8}}),r(.2,{spread:60,angle:120,origin:{x:.8,y:.8}}),r(.35,{spread:100,decay:.91,scalar:1.2,angle:90,origin:{x:.5,y:1}}),r(.1,{spread:120,startVelocity:25,angle:Math.random()*360,origin:{x:Math.random(),y:Math.random()*.5}})}};y.\u0275fac=function(o){return new(o||y)},y.\u0275cmp=he({type:y,selectors:[["app-three-book"]],viewQuery:function(o,h){if(o&1&&ge(et,7),o&2){let m;me(m=ve())&&(h.rendererContainer=m.first)}},decls:12,vars:2,consts:[["rendererContainer",""],["fullscreen",""],["id","emoji-container"],["class","hint",4,"ngIf"],[1,"controls"],["ion-button","",3,"click"],["id","rendererContainer"],[1,"hint"]],template:function(o,h){if(o&1){let m=ue();z(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),q(3,"Alexim71 Dev"),W()()(),z(4,"ion-content",1),Y(5,"div",2),ce(6,tt,2,0,"div",3),z(7,"div",4)(8,"button",5),fe("click",function(){return se(m),le(h.toggleOpen())}),q(9),W()(),Y(10,"div",6,0),W()}o&2&&($(6),de("ngIf",h.showHint),$(3),pe(h.isOpen?"Fermer":"Ouvrir"))},dependencies:[ye,Ce,Pe,Ee,Me,we,be],styles:["[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: #111}[_nghost-%COMP%]   #rendererContainer[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;touch-action:none}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{--background: rgba(255,255,255,.12);color:#fff;border:1px solid rgba(255,255,255,.12);padding:6px 10px;border-radius:6px;top:8px;right:12px}[_nghost-%COMP%]   .hint[_ngcontent-%COMP%]{position:absolute;bottom:15%;left:50%;transform:translate(-50%);background:#0009;color:#fff;padding:12px 16px;border-radius:8px;font-size:.95rem;text-align:center;max-width:90%;z-index:10;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:translate(-50%) scale(1)}50%{transform:translate(-50%) scale(1.05)}to{transform:translate(-50%) scale(1)}}ion-content[_ngcontent-%COMP%]{position:relative;overflow:hidden;background:radial-gradient(circle,#fdfbfb,#ebedee)}.emoji[_ngcontent-%COMP%]{position:absolute;font-size:2rem;left:50%;top:70%;transform:translate(-50%,-50%);animation:_ngcontent-%COMP%_explode linear forwards;opacity:.9}@keyframes _ngcontent-%COMP%_explode{0%{transform:translate(-50%,-50%) scale(.5);opacity:1}to{transform:var(--move) scale(1.5);opacity:0}}ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: transparent;color:#fff}ion-toolbar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}.controls[_ngcontent-%COMP%]{position:absolute;top:8px;right:12px;z-index:10}"]});let F=y;return F})();export{dt as ThreeBookPage};
